uuid: fc208305-452e-434f-b4d1-86e7c25a99cd
langcode: en
status: true
dependencies:
  config:
    - core.base_field_override.node.article.moderation_state
id: node.article.moderation_state.default
label: 'Moderation state'
rule: llm_moderation_state
input_mode: token
weight: 100
worker_type: direct
entity_type: node
bundle: article
field_name: moderation_state
edit_mode: true
base_field: body
prompt: "If the text you see is about Peanuts cartoon, make sure it gets {{ flagged }}. If it is not about Peanuts cartoon, the content should be {{ published }}.\r\n\r\nText:\r\n--------------------\r\n{{ context }}\r\n--------------------"
token: "If the user's roles include \"administrator\", do nothing and ignore the rest of this prompt.\r\n\r\nUser roles:\r\n--------------------\r\n[current-user:roles:join-path]\r\n--------------------\r\n\r\nElse, \r\nYou are a compliance content reviewer for official New York State Senate press releases. \r\nYour task is to evaluate whether the content violates nonpartisan publication guidelines. \r\nIf any rules are broken, explain which rule(s) apply, quote or summarize the problematic text, and briefly explain why it’s an issue.\r\nIf no rules are broken, respond: “No issues detected.”\r\nBe clear, objective, and concise. Avoid political or editorial opinions.\r\n\r\nReview the following press release and identify any violations of these rules:\r\n\r\n1. Partisan References\r\n   Material should not include or imply partisan references such as “Democrats,” “Republicans,” \r\n   “Senate Democrats,” “Senate Republicans,” “Democratic Conference,” “Republican Conference,” \r\n   “Democratic Leadership,” or “Republican Leadership.”\r\n\r\n2. Campaign or Fundraising Solicitation\r\n   Material should not solicit or encourage political campaign contributions for any Senate Member, person, or political party.\r\n\r\n3. Harsh or Derogatory Language Toward Public Officials\r\n   Material should not contain insults, harsh criticism, or strong derogatory statements about another legislator or public official.\r\n\r\n4. Fictitious or Non-Informational Content\r\n   Material should not contain opinions, speculation, or fabricated statements presented as fact. \r\n   All information must be factual and informational.\r\n\r\n5. Overtly Political or Campaign-Style Material\r\n   Material should not appear promotional, partisan, or more suitable for campaign literature than an official government communication.\r\n\r\nYour response should use this format:\r\n\r\nResult:\r\n[List of any violations found, or “No issues detected.”]\r\n\r\nFor each violation:\r\n- Rule #: [number and name of rule]\r\n- Offending text: [quote or summary]\r\n- Explanation: [why it violates the rule]\r\n\r\nThen set the node to the {{ flagged }} workflow state.\r\n\r\nText:\r\n--------------------\r\n[node:title]\r\n[node:body]\r\n--------------------\r\n\r\nOtherwise, do nothing."
plugin_config:
  automator_enabled: 1
  automator_rule: llm_moderation_state
  automator_mode: token
  automator_base_field: body
  automator_prompt: "If the text you see is about Peanuts cartoon, make sure it gets {{ flagged }}. If it is not about Peanuts cartoon, the content should be {{ published }}.\r\n\r\nText:\r\n--------------------\r\n{{ context }}\r\n--------------------"
  automator_token: "If the user's roles include \"administrator\", do nothing and ignore the rest of this prompt.\r\n\r\nUser roles:\r\n--------------------\r\n[current-user:roles:join-path]\r\n--------------------\r\n\r\nElse, \r\nYou are a compliance content reviewer for official New York State Senate press releases. \r\nYour task is to evaluate whether the content violates nonpartisan publication guidelines. \r\nIf any rules are broken, explain which rule(s) apply, quote or summarize the problematic text, and briefly explain why it’s an issue.\r\nIf no rules are broken, respond: “No issues detected.”\r\nBe clear, objective, and concise. Avoid political or editorial opinions.\r\n\r\nReview the following press release and identify any violations of these rules:\r\n\r\n1. Partisan References\r\n   Material should not include or imply partisan references such as “Democrats,” “Republicans,” \r\n   “Senate Democrats,” “Senate Republicans,” “Democratic Conference,” “Republican Conference,” \r\n   “Democratic Leadership,” or “Republican Leadership.”\r\n\r\n2. Campaign or Fundraising Solicitation\r\n   Material should not solicit or encourage political campaign contributions for any Senate Member, person, or political party.\r\n\r\n3. Harsh or Derogatory Language Toward Public Officials\r\n   Material should not contain insults, harsh criticism, or strong derogatory statements about another legislator or public official.\r\n\r\n4. Fictitious or Non-Informational Content\r\n   Material should not contain opinions, speculation, or fabricated statements presented as fact. \r\n   All information must be factual and informational.\r\n\r\n5. Overtly Political or Campaign-Style Material\r\n   Material should not appear promotional, partisan, or more suitable for campaign literature than an official government communication.\r\n\r\nYour response should use this format:\r\n\r\nResult:\r\n[List of any violations found, or “No issues detected.”]\r\n\r\nFor each violation:\r\n- Rule #: [number and name of rule]\r\n- Offending text: [quote or summary]\r\n- Explanation: [why it violates the rule]\r\n\r\nThen set the node to the {{ flagged }} workflow state.\r\n\r\nText:\r\n--------------------\r\n[node:title]\r\n[node:body]\r\n--------------------\r\n\r\nOtherwise, do nothing."
  automator_edit_mode: 1
  automator_label: 'Moderation state'
  automator_weight: '100'
  automator_worker_type: direct
  automator_ai_provider: openai
  automator_ai_model: gpt-5
  automator_configuration_temperature: '1'
  automator_configuration_frequency_penalty: '0'
  automator_configuration_presence_penalty: '0'
  automator_configuration_top_p: '1'
  automator_configuration_max_completion_tokens: '4096'
  automator_configuration_reasoning_effort: medium
  automator_configuration_image_field: ''
  automator_configuration_image_style: ''
  automator_trigger_states:
    flagged: flagged
    published: published
    draft: 0
  automator_use_simple_model: 0
  automator_trigger_lookup:
    flagged: flagged
    published: published
    draft: 0
  automator_store_explanation: field_moderation_reason
