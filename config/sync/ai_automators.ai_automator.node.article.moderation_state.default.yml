uuid: fc208305-452e-434f-b4d1-86e7c25a99cd
langcode: en
status: true
dependencies:
  config:
    - core.base_field_override.node.article.moderation_state
id: node.article.moderation_state.default
label: 'Moderation state'
rule: llm_moderation_state
input_mode: token
weight: 100
worker_type: direct
entity_type: node
bundle: article
field_name: moderation_state
edit_mode: true
base_field: body
prompt: "If the text you see is about Peanuts cartoon, make sure it gets {{ flagged }}. If it is not about Peanuts cartoon, the content should be {{ published }}.\r\n\r\nText:\r\n--------------------\r\n{{ context }}\r\n--------------------"
token: "If the user's roles include \"administrator\", do nothing and ignore the rest of this prompt.\r\n\r\nUser roles:\r\n--------------------\r\n[current-user:roles:join-path]\r\n--------------------\r\n\r\nElse, if:\r\n\r\n1. The following text is about the Peanuts cartoon\r\n\r\nThen set the node to the {{ flagged }} workflow state.\r\n\r\nText:\r\n--------------------\r\n[node:title]\r\n[node:body]\r\n--------------------\r\n\r\nOtherwise, do nothing."
plugin_config:
  automator_enabled: 1
  automator_rule: llm_moderation_state
  automator_mode: token
  automator_base_field: body
  automator_prompt: "If the text you see is about Peanuts cartoon, make sure it gets {{ flagged }}. If it is not about Peanuts cartoon, the content should be {{ published }}.\r\n\r\nText:\r\n--------------------\r\n{{ context }}\r\n--------------------"
  automator_token: "If the user's roles include \"administrator\", do nothing and ignore the rest of this prompt.\r\n\r\nUser roles:\r\n--------------------\r\n[current-user:roles:join-path]\r\n--------------------\r\n\r\nElse, if:\r\n\r\n1. The following text is about the Peanuts cartoon\r\n\r\nThen set the node to the {{ flagged }} workflow state.\r\n\r\nText:\r\n--------------------\r\n[node:title]\r\n[node:body]\r\n--------------------\r\n\r\nOtherwise, do nothing."
  automator_edit_mode: 1
  automator_label: 'Moderation state'
  automator_weight: '100'
  automator_worker_type: direct
  automator_ai_provider: openai
  automator_ai_model: gpt-5
  automator_configuration_temperature: '1'
  automator_configuration_frequency_penalty: '0'
  automator_configuration_presence_penalty: '0'
  automator_configuration_top_p: '1'
  automator_configuration_max_completion_tokens: '4096'
  automator_configuration_reasoning_effort: medium
  automator_configuration_image_field: ''
  automator_configuration_image_style: ''
  automator_trigger_states:
    draft: draft
    flagged: flagged
    published: published
  automator_use_simple_model: 0
  automator_trigger_lookup:
    draft: draft
    flagged: flagged
    published: published
  automator_store_explanation: field_moderation_reason
