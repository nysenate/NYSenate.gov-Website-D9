{"version":3,"sources":["src/patterns/pages/dashboard/dashboard.es6.js"],"names":["document","Drupal","$","behaviors","dashboard","attach","context","win","window","origNav","self","debounceTime","once","each","nav","clone","attr","addClass","headerBar","find","sidebarToggle","sidebar","sidebarToggleInit","prependTo","css","navTop","offset","top","alignPosition","scroll","debounce","checkTopBarState","resize","initToolbarObserver","doc","currentTop","scrollTop","outerHeight","hasClass","removeClass","setTimeout","onResize","orig","cloneTop","isMobile","width","winScrollTop","removeAttr","origTop","position","alignFixedTableHeader","err","pageUserTableTh","height","targetNode","config","attributes","childList","subtree","callback","mutationList","mutation","attributeName","target","localName","observer","MutationObserver","observe","disconnect","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Dashboard Header.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Dashboard Header behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.dashboard = {\n    attach: function (context) {\n      if (context !== document) {\n        return;\n      }\n\n      const win = $(window);\n      const origNav = $('#js-sticky--dashboard', context);\n      const self = this;\n      const debounceTime = 250;\n\n      origNav.once('navigation').each(function () {\n        const nav = origNav.clone().attr('id', 'js-sticky--dashboard--clone');\n        nav.addClass('fixed');\n\n        const headerBar = nav.find('.c-header-bar');\n\n        const sidebarToggle = nav.find('.sidebar-toggle');\n        sidebarToggle.each(Drupal.behaviors.sidebar.sidebarToggleInit);\n\n        // place clone\n        nav.prependTo('.page').css({\n          'z-index': '100'\n        });\n        const navTop = nav.offset().top;\n\n        self.alignPosition(origNav, nav, navTop);\n\n        win.scroll(\n          Drupal.debounce(() => self.checkTopBarState(nav, headerBar), 300)\n        );\n        win.scroll(\n          Drupal.debounce(\n            () => self.alignPosition(origNav, nav, navTop),\n            debounceTime\n          )\n        );\n        win.resize(\n          Drupal.debounce(\n            () => self.alignPosition(origNav, nav, navTop),\n            debounceTime\n          )\n        );\n\n        self.initToolbarObserver(origNav, nav, self.alignPosition);\n      });\n    },\n    checkTopBarState: function (nav, headerBar) {\n      let doc = $(document);\n      let currentTop = doc.scrollTop();\n\n      if (currentTop > nav.outerHeight() && !headerBar.hasClass('collapsed')) {\n        headerBar.addClass('collapsed');\n      }\n      else if (\n        currentTop <= nav.outerHeight() &&\n        headerBar.hasClass('collapsed')\n      ) {\n        headerBar.removeClass('collapsed');\n      }\n\n      setTimeout(() => Drupal.behaviors.sidebar.onResize(nav), 300);\n    },\n    alignPosition: function (orig, clone, cloneTop) {\n      try {\n        const win = $(window);\n        const isMobile = win.width() < 576;\n        const winScrollTop = win.scrollTop();\n\n        if (isMobile) {\n          clone.removeAttr('style');\n          orig.addClass('fixed');\n          if (winScrollTop > cloneTop) {\n            clone.addClass('fixed');\n            orig.removeClass('fixed');\n          }\n          else {\n            clone.removeClass('fixed');\n            orig.addClass('fixed');\n          }\n        }\n        else {\n          const origTop = orig.position().top;\n          clone.css('top', `${typeof origTop === 'number' ? origTop : 0}px`);\n          clone.addClass('fixed');\n          orig.removeClass('fixed');\n          orig.removeAttr('style');\n        }\n\n        setTimeout(() => Drupal.behaviors.dashboard.alignFixedTableHeader(clone), 300);\n      }\n      catch (err) {\n        return err;\n      }\n    },\n    alignFixedTableHeader: function (clone) {\n      try {\n        const pageUserTableTh = $('.sticky-header');\n\n        if (!pageUserTableTh) {\n          return;\n        }\n\n        const cloneTop = clone.position().top + clone.height();\n        pageUserTableTh.css('top', `${typeof cloneTop === 'number' ? cloneTop : 0}px`);\n      }\n      catch (err) {\n        return err;\n      }\n    },\n    initToolbarObserver: function (origNav, nav, alignPosition) {\n      // Select the node that will be observed for mutations\n      const targetNode = $('body');\n\n      // Options for the observer (which mutations to observe)\n      const config = { attributes: true, childList: true, subtree: true };\n\n      // Callback function to execute when mutations are observed\n      const callback = (mutationList) => {\n        for (const mutation of mutationList) {\n          if (\n            mutation.attributeName === 'style' &&\n            mutation.target.localName === 'body'\n          ) {\n            alignPosition(origNav, nav);\n          }\n        }\n      };\n\n      // Create an observer instance linked to the callback function\n      const observer = new MutationObserver(callback);\n\n      try {\n        // Start observing the target node for configured mutations\n        targetNode.each(function () {\n          observer.observe(this, config);\n        });\n      }\n      catch (err) {\n        observer.disconnect();\n        return err;\n      }\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"dashboard.es6.js"}