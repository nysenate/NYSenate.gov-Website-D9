{"version":3,"sources":["src/patterns/components/event-calendar/event-calendar.js"],"names":["document","Drupal","$","behaviors","eventCalendar","attach","viewType","formatType","submit","length","val","splitDate","split","Zebra_DatePicker","always_visible","show_clear_date","show_icon","show_select_today","first_day_of_week","format","onSelect","inputElement","click","onOpen","trigger","_text","html","_selected","_current","_month","each","hasClass","selectedDate","Date","previousMonth","setMonth","getMonth","toLocaleString","month","css","onChange","view","elements","localStorage","getItem","addClass","closest","setItem","parents","on","hide","parent","find","show","jQuery"],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\n/* eslint-disable new-cap */\n/* eslint-disable camelcase */\n/* eslint-disable max-len */\n/**\n * @file\n * Behaviors for the Event Calendar.\n */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Event Calendar behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  // Set calendar filters labels\n  Drupal.behaviors.eventCalendar = {\n    attach: function () {\n      // Init variables\n      var viewType = '';\n      var formatType = 'm/d/Y';\n      var submit = '';\n\n      // Check the type of view i.e day/week/month and initialize datepicker options\n      if ($('.view-events.view-display-id-day_block').length > 0) {\n        viewType = 'day';\n        submit = $('#views-exposed-form-events-day-block input[type=\"submit\"]');\n      }\n      if ($('.view-events.view-display-id-page_1').length > 0) {\n        viewType = 'day';\n        submit = $('#views-exposed-form-events-page_1 input[type=\"submit\"]');\n      }\n      if ($('.view-events.view-display-id-page_2').length > 0) {\n        viewType = 'month';\n        formatType = 'm/Y';\n        submit = $('#views-exposed-form-events-page-2 input[type=\"submit\"]');\n      }\n      if ($('.view-events.view-display-id-page_3').length > 0) {\n        viewType = 'week';\n        submit = $('#views-exposed-form-events-page-3 input[type=\"submit\"]');\n      }\n\n      if ($('.form-item-date.js-form-type-textfield input').val()) {\n        if (viewType === 'day') {\n          $('#datepicker input').val($('.form-item-date.js-form-type-textfield input').val());\n        }\n        else if (viewType === 'month') {\n          const splitDate = $('.form-item-date.js-form-type-textfield  input')\n            .val()\n            .split('/');\n\n          $('.form-item-date.js-form-type-textfield input').val(`${splitDate[0]}/${splitDate[2]}`);\n          $('#datepicker input').val(`${splitDate[0]}/${splitDate[2]}`);\n        }\n      }\n      if ($('.js-form-item-date-min input').val()) {\n        const splitDate = $('.js-form-item-date-min input').val().split('-');\n\n        if (splitDate.length > 1) {\n          $('.js-form-item-date-min input').val(`${splitDate[1]}/${splitDate[2]}/${splitDate[0]}`);\n          $('#datepicker input').val(`${splitDate[1]}/${splitDate[2]}/${splitDate[0]}`);\n        }\n        else {\n          $('.js-form-item-date-min input').val(splitDate[0]);\n          $('#datepicker input').val(splitDate[0]);\n        }\n      }\n      if ($('.js-form-item-date-max input').val()) {\n        const splitDate = $('.js-form-item-date-max input').val().split('-');\n\n        if (splitDate.length > 1) {\n          $('.js-form-item-date-max input').val(`${splitDate[1]}/${splitDate[2]}/${splitDate[0]}`);\n        }\n        else {\n          $('.js-form-item-date-max input').val(splitDate[0]);\n        }\n      }\n\n      // Initialize Zebra Datepicker\n      $('#datepicker input').Zebra_DatePicker({\n        always_visible: $('#container'),\n        show_clear_date: false,\n        show_icon: false,\n        show_select_today: false,\n        first_day_of_week: 0,\n        format: formatType,\n        onSelect: function (format) {\n          var inputElement = '';\n          if (viewType === 'week') {\n            inputElement = $('.js-form-item-date-min input');\n          }\n          else {\n            inputElement = $('.form-item-date.js-form-type-textfield input');\n          }\n          if (viewType === 'month') {\n            // Temporarily set date value to avoid conflict with the views form.\n            const splitDate = format.split('/');\n            inputElement.val(`${splitDate[0]}/01/${splitDate[1]}`);\n            submit.click();\n            inputElement.val(`${splitDate[0]}/${splitDate[1]}`);\n          }\n          else {\n            inputElement.val(format);\n            submit.click();\n          }\n        },\n        onOpen: function () {\n          this.trigger('change');\n          var _text = $('.dp_header .dp_caption').html();\n          var _selected = $('.dp_selected').html();\n          var _current = $('.dp_current').html();\n          var _month = _text.split(',');\n          if (viewType === 'day') {\n            if (_selected) {\n              $('.mobile-calendar-toggle').html(\n                'Viewing Day of ' + _month[0] + ' ' + _selected\n              );\n              $('.cal-nav-wrapper span.title').html(\n                _month[0] + ' ' + _selected + ',' + _month[1]\n              );\n            }\n            else {\n              $('.mobile-calendar-toggle').html(\n                'Viewing Day of ' + _month[0] + ' ' + _current\n              );\n              $('.cal-nav-wrapper span.title').html(\n                _month[0] + ' ' + _current + ',' + _month[1]\n              );\n            }\n          }\n          if (viewType === 'week') {\n            $('.currentweek td').each(function () {\n              if ($(this).hasClass('dp_not_in_month')) {\n                var selectedDate = new Date(_text);\n                var previousMonth = new Date(\n                  selectedDate.setMonth(selectedDate.getMonth() - 1)\n                );\n                _month[0] = previousMonth.toLocaleString('default', {\n                  month: 'long'\n                });\n              }\n            });\n            $('.mobile-calendar-toggle').html(\n              'Viewing Week of ' +\n                _month[0] +\n                ' ' +\n                $('.currentweek td:first').html()\n            );\n            $('.cal-nav-wrapper span.title').html(\n              'Week of ' +\n                _month[0] +\n                ' ' +\n                $('.currentweek td:first').html() +\n                ',' +\n                _month[1]\n            );\n          }\n          if (viewType === 'month') {\n            $('.mobile-calendar-toggle').html('Viewing month of ' + _month[0]);\n            $('.cal-nav-wrapper span.title').html(_text);\n          }\n          $('.cal-nav-wrapper span.title').css('display', 'inline-block');\n        },\n        onChange: function (view, elements) {\n          var _selected = $('.dp_selected').html();\n\n          if (_selected === null) {\n            _selected = localStorage.getItem('selected');\n\n            $('.dp_daypicker td').each(function () {\n              if ($(this).html() === _selected) {\n                $(this).addClass('dp_selected');\n                $(this).closest('tr').addClass('currentweek');\n                return;\n              }\n            });\n          }\n          else {\n            localStorage.setItem('selected', $('.dp_selected').html());\n          }\n          elements.each(function () {\n            if (\n              viewType === 'week' &&\n              $(this).hasClass('dp_selected')\n            ) {\n              $(this).closest('tr').addClass('currentweek');\n              $(this).addClass('dp_selected');\n              $(this).parents('table').addClass('week');\n            }\n          });\n        }\n      });\n      // a bit of a hack to keep header the correct width.\n      $('#datepicker .dp_header').css('width', '100%');\n      $('.mobile-calendar-toggle').on('click', function () {\n        $(this).hide();\n        $(this).parent().find('#container .Zebra_DatePicker').show();\n      });\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"event-calendar.js"}