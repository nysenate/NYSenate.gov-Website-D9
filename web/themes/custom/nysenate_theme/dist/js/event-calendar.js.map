{"version":3,"sources":["src/patterns/components/event-calendar/event-calendar.js"],"names":["document","Drupal","$","behaviors","eventCalendar","attach","val","viewType","formatType","length","Zebra_DatePicker","always_visible","show_clear_date","show_icon","show_select_today","first_day_of_week","format","onSelect","inputElement","parents","submit","onOpen","trigger","_text","html","_selected","_month","split","lastDayOfMonth","each","hasClass","selectedDate","Date","previousMonth","setMonth","getMonth","toLocaleString","month","css","onChange","view","elements","localStorage","getItem","addClass","closest","setItem","className","match","on","hide","parent","find","show","jQuery"],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\n/* eslint-disable new-cap */\n/* eslint-disable camelcase */\n/* eslint-disable max-len */\n/**\n * @file\n * Behaviors for the Event Calendar.\n */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Event Calendar behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  // Set calendar filters labels\n  Drupal.behaviors.eventCalendar = {\n    attach: function () {\n      if ($('#edit-field-date-value-value input').val()) {\n        $('#datepicker input').val(\n          $('#edit-field-date-value-value input').val()\n        );\n      }\n      if ($('#edit-field-date-value-min input').val()) {\n        $('#datepicker input').val($('#edit-field-date-value-min input').val());\n      }\n\n      // Init variables\n      var viewType = '';\n      var formatType = 'm/d/Y';\n\n      // Check the type of view i.e day/week/month and initialize datepicker options\n      if ($('.view-calendar-page.view-display-id-page').length > 0) {\n        viewType = 'day';\n      }\n      if ($('.view-calendar-page.view-display-id-month').length > 0) {\n        viewType = 'month';\n        formatType = 'm/Y';\n      }\n      if ($('.view-calendar-page.view-display-id-week').length > 0) {\n        viewType = 'week';\n      }\n\n      // Initialize Zebra Datepicker\n      $('#datepicker input').Zebra_DatePicker({\n        always_visible: $('#container'),\n        show_clear_date: false,\n        show_icon: false,\n        show_select_today: false,\n        first_day_of_week: 0,\n        format: formatType,\n        onSelect: function (format) {\n          var inputElement = '';\n          if (viewType === 'week') {\n            inputElement = $('#edit-field-date-value-min input');\n          }\n          else {\n            inputElement = $('#edit-field-date-value-value input');\n          }\n          inputElement.val(format);\n          inputElement.parents('form').submit();\n        },\n        onOpen: function () {\n          this.trigger('change');\n          var _text = $('.dp_header .dp_caption').html();\n          var _selected = $('.dp_selected').html();\n          var _month = _text.split(',');\n          if (viewType === 'day') {\n            $('.mobile-calendar-toggle').html(\n              'Viewing Day of ' + _month[0] + ' ' + _selected\n            );\n            $('.cal-nav-wrapper span.title').html(\n              _month[0] + ' ' + _selected + ',' + _month[1]\n            );\n          }\n          if (viewType === 'week') {\n            var lastDayOfMonth = '';\n            $('.currentweek td').each(function () {\n              if (!$(this).hasClass('dp_not_in_month')) {\n                lastDayOfMonth = $(this).html();\n                return false;\n              }\n              else {\n                var selectedDate = new Date(_text);\n                previousMonth = new Date(\n                  selectedDate.setMonth(selectedDate.getMonth() - 1)\n                );\n                _month[0] = previousMonth.toLocaleString('default', {\n                  month: 'long'\n                });\n              }\n            });\n            $('.mobile-calendar-toggle').html(\n              'Viewing Week of ' +\n                _month[0] +\n                ' ' +\n                $('.currentweek td:first').html()\n            );\n            $('.cal-nav-wrapper span.title').html(\n              'Week of ' +\n                _month[0] +\n                ' ' +\n                $('.currentweek td:first').html() +\n                ',' +\n                _month[1]\n            );\n          }\n          if (viewType === 'month') {\n            $('.mobile-calendar-toggle').html('Viewing month of ' + _month[0]);\n            $('.cal-nav-wrapper span.title').html(_text);\n          }\n          $('.cal-nav-wrapper span.title').css('display', 'inline-block');\n        },\n        onChange: function (view, elements) {\n          var _selected = $('.dp_selected').html();\n          if (_selected === null) {\n            _selected = localStorage.getItem('selected');\n            $('.dp_daypicker td').each(function () {\n              if ($(this).html() === _selected) {\n                $(this).addClass('dp_selected');\n                $(this).closest('tr').addClass('currentweek');\n                return;\n              }\n            });\n          }\n          else {\n            localStorage.setItem('selected', $('.dp_selected').html());\n          }\n          elements.each(function () {\n            if (\n              viewType === 'week' &&\n              $(this)[0].className.match(/dp_selected$/)\n            ) {\n              $(this).closest('tr').addClass('currentweek');\n              $(this).addClass('dp_selected');\n              $(this).parents('table').addClass('week');\n            }\n          });\n        }\n      });\n      // a bit of a hack to keep header the correct width.\n      $('#datepicker .dp_header').css('width', '100%');\n      $('.mobile-calendar-toggle').on('click', function () {\n        $(this).hide();\n        $(this).parent().find('#container .Zebra_DatePicker').show();\n      });\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"event-calendar.js"}