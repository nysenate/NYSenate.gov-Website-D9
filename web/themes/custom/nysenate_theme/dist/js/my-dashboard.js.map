{"version":3,"sources":["src/patterns/pages/my-dashboard/my-dashboard.js"],"names":["Drupal","once","behaviors","nysDashboardFilterAccordion","attach","inMobileMode","accordionButtonOnce","forEach","accordionButton","setAttribute","addEventListener","classList","toggle","accordionContainer","document","getElementById","style","maxHeight","scrollHeight","nysDashboardStickyFilters","setStickyFilterClasses","window","onscroll","stickyTopLocation","windowLocation","scrollY","contentHeight","querySelector","getBoundingClientRect","height","stickyFilterElem","stickyFilterHeight","stickyFilterWidth","width","topStickyTrigger","top","bottomStickyTrigger","add","remove","rightSidebarElem","rightSidebarInMobileMode","getComputedStyle","getPropertyValue"],"mappings":"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","sourcesContent":["/**\n * @file\n *\n * Behaviors for the My Dashboard page.\n */\n((Drupal, once) => {\n  Drupal.behaviors.nysDashboardFilterAccordion = {\n    attach: function () {\n      if (!inMobileMode()) {\n        return;\n      }\n      let accordionButtonOnce = once('nysDashboardFilterAccordion', '#dashboard-filters-accordion-button');\n      accordionButtonOnce.forEach(function (accordionButton) {\n        accordionButton.setAttribute('aria-expanded', false);\n        accordionButton.addEventListener('click', function () {\n          this.classList.toggle('active');\n          let accordionContainer = document.getElementById('dashboard-filters-accordion');\n          if (accordionContainer.style.maxHeight) {\n            accordionButton.setAttribute('aria-expanded', false);\n            accordionContainer.style.maxHeight = null;\n          } else {\n            accordionButton.setAttribute('aria-expanded', true);\n            accordionContainer.style.maxHeight = accordionContainer.scrollHeight + 'px';\n          }\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.nysDashboardStickyFilters = {\n    attach: function () {\n      if (inMobileMode()) {\n        return;\n      }\n      setStickyFilterClasses();\n      window.onscroll = function () {setStickyFilterClasses()};\n    }\n  };\n\n  function setStickyFilterClasses() {\n    let stickyTopLocation = 120;\n    let windowLocation = window.scrollY;\n    let contentHeight = document\n      .querySelector('.view-my-dashboard')\n      .getBoundingClientRect()\n      .height;\n    let stickyFilterElem = document\n      .getElementById('block-exposed-form-my-dashboard-main');\n    let stickyFilterHeight = stickyFilterElem\n      .getBoundingClientRect()\n      .height;\n    let stickyFilterWidth = stickyFilterElem\n      .getBoundingClientRect()\n      .width;\n    let topStickyTrigger = document\n      .querySelector('.region-sidebar-right')\n      .getBoundingClientRect()\n      .top\n      + windowLocation\n      - stickyTopLocation;\n    let bottomStickyTrigger = document\n      .querySelector('footer.l-footer')\n      .getBoundingClientRect()\n      .top\n      + windowLocation\n      - stickyFilterHeight\n      - stickyTopLocation;\n    if (stickyFilterHeight >= contentHeight) {\n      return;\n    }\n    if (windowLocation > topStickyTrigger) {\n      stickyFilterElem.classList.add('sticky-filter')\n      stickyFilterElem.style.width = stickyFilterWidth + 'px';\n      stickyFilterElem.style.top = stickyTopLocation + 'px';\n    }\n    else {\n      stickyFilterElem.classList.remove('sticky-filter');\n      stickyFilterElem.style.width = null;\n      stickyFilterElem.style.top = null;\n    }\n    if (windowLocation >= bottomStickyTrigger) {\n      stickyFilterElem.classList.add('sticky-filter-bottom')\n    }\n    else {\n      stickyFilterElem.classList.remove('sticky-filter-bottom');\n    }\n  }\n\n  function inMobileMode() {\n    let rightSidebarElem = document.querySelector('.layout-sidebar-right');\n    let rightSidebarInMobileMode = window.getComputedStyle(rightSidebarElem).getPropertyValue('order');\n    return rightSidebarInMobileMode === '1';\n  }\n})(Drupal, once);\n"],"file":"my-dashboard.js"}