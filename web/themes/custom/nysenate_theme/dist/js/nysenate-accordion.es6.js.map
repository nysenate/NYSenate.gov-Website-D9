{"version":3,"sources":["src/patterns/components/nysenate-accordion/nysenate-accordion.es6.js"],"names":["document","Drupal","$","behaviors","nysenateAccordion","attach","context","self","$accordions","$toggles","$headings","find","each","$accordion","$heading","$itemCount","length","hasClass","appendTo","$toggle","on","toggleClickEvent","$content","attr","$contents","changeAllTexts","changeCurrentTexts","addClass","removeClass","textsToReplace","html","closeAccordionTexts","replace","text","status","$headinIndicator","textToReplace","openAccordionText","closeAccordionText","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Filter Accordion.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Filter Accordion behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.nysenateAccordion = {\n    attach: function(context) {\n\n      const self = this;\n      const $accordions = $('.nysenate-accordion', context);\n      const $toggles = $('.nysenate-accordion__toggle', context);\n      const $headings = $accordions.find('.nysenate-accordion__heading > span');\n\n      $accordions.each(function() {\n        const $accordion = $(this);\n        const $heading = $accordion.find('.nysenate-accordion__heading');\n        let $itemCount = $accordion.find('.nysenate-accordion__content', context).length;\n        if ($accordion.find('.nysenate-accordion__content .c-bill--actions-table-col2 span', context).length) {\n          $itemCount = $accordion.find('.nysenate-accordion__content .c-bill--actions-table-col2 span', context).length;\n        }\n\n        if (!$heading.hasClass('no-count')) {\n          $(`<span class=\"count\">(${$itemCount})</span>`).appendTo($heading);\n        }\n\n        // Attach click handler for accordion.\n        const $toggle = $accordion.find('.nysenate-accordion__toggle', context);\n        $toggle.on('click', function() {\n          self.toggleClickEvent(self, $accordions, $headings, $toggles, $accordion, $heading, $(this));\n        });\n      });\n    },\n    toggleClickEvent: function(self, $accordions, $headings, $toggles, $accordion, $heading, $toggle) {\n\n      // Identify the matching element.\n      const $content = $accordion.find('#' + $toggle.attr('aria-controls'));\n\n      // all matching elements\n      const $contents = $accordions.find('#' + $toggle.attr('aria-controls'));\n\n      if (!$accordion.hasClass('open')) {\n        $toggles.attr('aria-expanded', 'false');\n        $contents.attr('aria-hidden', 'true');\n        self.changeAllTexts($headings);\n\n        self.changeCurrentTexts($heading, 'open');\n        // Accordion does not have `.open`, so we are opening the accordion.\n        $accordion.addClass('open');\n        // Toggle the `aria-expanded`.\n        $toggle.attr('aria-expanded', 'true');\n        // Toggle the `aria-hidden` attribute on the content.\n        $content.attr('aria-hidden', 'false');\n      }\n      else {\n        // Same as the if, but in reverse.\n        self.changeCurrentTexts($heading, 'close');\n        $accordion.removeClass('open');\n        $toggle.attr('aria-expanded', 'false');\n        $content.attr('aria-hidden', 'true');\n      }\n    },\n    changeAllTexts: function ($headings) {\n      const textsToReplace = $headings.html();\n      const closeAccordionTexts = textsToReplace.replace('Hide', 'View');\n\n      $headings.text(closeAccordionTexts);\n\n      return false;\n    },\n    changeCurrentTexts: function ($heading, status) {\n      const $headinIndicator = $heading.find('.indicator');\n      const textToReplace = $headinIndicator.html();\n      const openAccordionText = textToReplace.replace('View', 'Hide');\n      const closeAccordionText = textToReplace.replace('Hide', 'View');\n\n      if (status === 'open') {\n        $headinIndicator.text(openAccordionText);\n      }\n      else {\n        $headinIndicator.text(closeAccordionText);\n      }\n\n      return false;\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"nysenate-accordion.es6.js"}