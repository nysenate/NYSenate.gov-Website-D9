{"version":3,"sources":["src/patterns/components/nysenate-header/nysenate-header.js"],"names":["document","Drupal","$","behaviors","nysenateHeader","attach","context","self","userScroll","currentTop","window","scrollTop","previousTop","nav","origNav","clone","attr","addClass","menu","find","headerBar","actionBar","mobileNavToggle","searchToggle","$adminToolbar","adminHeight","length","outerHeight","headerHeight","$combinedHeights","css","forTesting","prependTo","appendTo","concat","on","toggleMobileNav","toggleSearchBar","scroll","Math","abs","height","hasClass","removeClass","blur","width","isMovingDown","checkTopBarState","isMovingUp","checkMenuState","isOutOfBounds","isTooHigh","isTooLow","body","toggleClass","focus","closeSearch","isHomepage","isInSession","jQuery"],"mappings":"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","sourcesContent":["!((document, Drupal, $) => {\n  'use strict';\n  Drupal.behaviors.nysenateHeader = {\n    attach: function (context) {\n      let self = this;\n      let userScroll = 0;\n      let currentTop = $(window).scrollTop();\n      let previousTop = 0;\n      let nav;\n      const origNav = $('#js-sticky', context);\n\n      nav = origNav.clone().attr('id', 'js-sticky--clone').addClass('fixed');\n\n      const menu = nav.find('.c-nav--wrap', context);\n      const headerBar = nav.find('.c-header-bar', context);\n      const actionBar = nav.find('.c-actionbar', context);\n      const mobileNavToggle = nav.find('.js-mobile-nav--btn');\n      const searchToggle = nav.find('.js-search--toggle', context);\n\n      const $adminToolbar = $('#toolbar-bar');\n\n      let adminHeight = $adminToolbar.length > 0 ? $adminToolbar.outerHeight() : 0;\n      let headerHeight = nav.length > 0 ? nav.outerHeight() : 0; // Create empty variables to use later for calculating heights.\n\n      let $combinedHeights = 0;\n\n      origNav.css('visibility', 'hidden');\n\n      // for patternlab only, can be removed once for integration\n      if ($('.pl-js-pattern-example').length > 0) {\n        const forTesting = '<div></div>';\n        $('.pl-js-pattern-example').css('position', 'relative');\n        nav.css('position', 'absolute');\n        nav.prependTo('.pl-js-pattern-example').css({\n          'z-index': '100'\n        });\n        if (nav.length > 0) {\n          $(forTesting).appendTo('.pl-js-pattern-example').css({\n            'background': 'gray',\n            'height': '400px'\n          });\n        }\n      }\n      else if ($('.layout-container').length > 0) {\n        adminHeight = $adminToolbar.length > 0 ? $adminToolbar.outerHeight() : 0;\n        headerHeight = nav.length > 0 ? nav.outerHeight() : 0;\n\n        $combinedHeights = headerHeight + adminHeight;\n\n        nav.prependTo('.layout-container').css({\n          'z-index': '100',\n          'margin-top': ''.concat($combinedHeights, 'px')\n        });\n      }\n\n      mobileNavToggle.on('click touch', function() {\n        self.toggleMobileNav(nav);\n      });\n\n      searchToggle.on('click touch', function() {\n        self.toggleSearchBar(menu);\n      });\n\n      $(window).scroll(function () {\n        currentTop = $(this).scrollTop();\n\n        // Close the nav after scrolling 1/3rd of page.\n        if (\n          Math.abs(userScroll - $(window).scrollTop()) >\n          $(window).height() / 3\n        ) {\n          if ($('.c-nav--wrap').hasClass('search-open')) {\n            $('.c-nav--wrap').removeClass('search-open');\n            $('.c-nav--wrap').find('.c-site-search--box').blur();\n          }\n        }\n\n        if ($(window).width() < 760) {\n          if (\n            self.isMovingDown(currentTop, previousTop) &&\n            currentTop >= nav.outerHeight()\n          ) {\n            actionBar.removeClass('hidden');\n            self.checkTopBarState(currentTop, previousTop, headerBar, nav);\n          }\n          else if (\n            self.isMovingUp(currentTop, previousTop) &&\n            currentTop < nav.outerHeight()\n          ) {\n            actionBar.addClass('hidden');\n            headerBar.removeClass('collapsed');\n          }\n        }\n        else {\n          if (\n            self.isMovingDown(currentTop, previousTop) &&\n            currentTop >= nav.outerHeight()\n          ) {\n            menu.addClass('closed');\n            actionBar.removeClass('hidden');\n            headerBar.addClass('collapsed');\n            self.checkTopBarState(currentTop, previousTop, headerBar, nav);\n          }\n          else if (\n            self.isMovingUp(currentTop, previousTop) &&\n            currentTop < nav.outerHeight()\n          ) {\n            menu.removeClass('closed');\n            actionBar.addClass('hidden');\n            headerBar.removeClass('collapsed');\n          }\n        }\n\n        previousTop = $(document).scrollTop();\n      });\n    },\n    checkMenuState: function (menu) {\n      if (this.isOutOfBounds()) {\n        return;\n      }\n\n      if (this.isMovingDown()) {\n        menu.addClass('closed');\n      }\n      else if (this.isMovingUp()) {\n        menu.removeClass('closed');\n      }\n    },\n    isMovingUp: function (currentTop, previousTop) {\n      return currentTop < previousTop;\n    },\n    isMovingDown: function (currentTop, previousTop) {\n      return currentTop > previousTop;\n    },\n    checkTopBarState: function (currentTop, previousTop, headerBar, nav) {\n      if (this.isOutOfBounds(currentTop, previousTop)) {\n        return;\n      }\n\n      if (currentTop > nav.outerHeight() && !headerBar.hasClass('collapsed')) {\n        headerBar.addClass('collapsed');\n      }\n      else if (\n        currentTop <= nav.outerHeight() &&\n        headerBar.hasClass('collapsed')\n      ) {\n        headerBar.removeClass('collapsed');\n      }\n    },\n    isOutOfBounds: function (currentTop, previousTop) {\n      return (\n        this.isTooHigh(currentTop, previousTop) || this.isTooLow(currentTop)\n      );\n    },\n    isTooHigh: function (currentTop, previousTop) {\n      return currentTop < 0 || previousTop < 0;\n    },\n    isTooLow: function (currentTop) {\n      return currentTop + $(window).height() >= $(document).height();\n    },\n    toggleMobileNav: function () {\n      var body = $('body');\n\n      // toggle classes\n      body.toggleClass('nav-open');\n    },\n    toggleSearchBar: function(menu) {\n      if(menu.hasClass('search-open')) {\n        menu.removeClass('search-open');\n        menu.find('.c-site-search--box').blur();\n        $('.c-site-search').removeClass('open');\n        $('.c-site-search').blur();\n      }\n      else {\n        menu.addClass('search-open');\n        menu.find('.c-site-search--box').focus();\n        $('.c-site-search').addClass('open');\n        $('.c-site-search').find('.c-site-search--box').focus();\n      }\n    },\n    closeSearch: function() {\n\n      if($('.c-nav--wrap').hasClass('search-open')) {\n        $('.c-nav--wrap').removeClass('search-open');\n        $('.c-nav--wrap').find('.c-site-search--box').blur();\n      }\n    },\n    isHomepage: function() {\n      return $('.view-homepage-hero').length > 0;\n    },\n    isInSession: function() {\n      return this.isHomepage() && $('.c-hero-livestream-video').length > 0;\n    },\n  };\n})(document, Drupal, jQuery);\n"],"file":"nysenate-header.js"}