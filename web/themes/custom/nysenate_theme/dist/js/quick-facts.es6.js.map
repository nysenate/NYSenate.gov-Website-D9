{"version":3,"sources":["src/patterns/components/quick-facts/quick-facts.es6.js"],"names":["document","Drupal","$","behaviors","quickFacts","attach","self","carouselAnimating","carouselNavBtn","highlightUpTo","hammer","on","event","carouselAdvance","e","item","nav","newPos","activeElem","direction","target","parents","siblings","attr","undefined","parent","wrap","carousel","find","itemAmt","children","length","itemWidth","width","carouselPos","parseInt","css","hasClass","preventDefault","setCarouselAnimating","Math","abs","checkCarouselBtns","left","setTimeout","addClass","removeClass","each","highlight","window","innerWidth","elem","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Quick Facts.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Quick Facts behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.quickFacts = {\n    attach: function() {\n      const self = this;\n      let carouselAnimating = false;\n      const carouselNavBtn = $('.c-carousel--nav .c-carousel--btn');\n\n      self.highlightUpTo();\n\n      $('#js-carousel-about-stats').hammer().on('swipe', function(event) {\n        self.carouselAdvance(event, carouselAnimating, self, $(this));\n      });\n\n      carouselNavBtn.on('click', function (event) {\n        self.carouselAdvance(event, carouselAnimating, self, $(this));\n      });\n    },\n    carouselAdvance: function(e, carouselAnimating, self, item) {\n      if(carouselAnimating) {\n        return;\n      }\n\n      let nav;\n      let newPos;\n      let activeElem;\n\n      // the nav is a different relationship if we're touch\n      if(e.direction === 4 || e.direction === 2) {\n        nav = $(e.target).parents('.js-carousel').siblings('.c-carousel--nav');\n        // this happens on the tour carousel has different DOM\n        if(nav.attr('class') === undefined) {\n          nav = $(e.target).parents('.c-tour--carousel-wrap').siblings('.c-carousel--nav');\n        }\n      }\n      else {\n        nav = item.parent('.c-carousel--nav');\n      }\n\n      const wrap = nav.parent();\n      const carousel = wrap.find('.js-carousel');\n      const itemAmt = carousel.children().length;\n      const itemWidth = carousel.width() / itemAmt;\n      const carouselPos = parseInt(carousel.css('left'));\n\n      // if the previous button is hidden - do not move that way or at all\n      if (e.direction === 4 && nav.children('.prev').hasClass('hidden')) {\n        return false;\n      }\n      // if the next button is hidden - do not move that way or at all\n      else if (e.direction === 2 && nav.children('.next').hasClass('hidden')) {\n        return false;\n      }\n      else {\n        e.preventDefault();\n      }\n\n      // set flag to stop button jammers\n      carouselAnimating = true;\n\n      const setCarouselAnimating = function() {\n        carouselAnimating = false;\n      };\n\n      // logic to set directionaltiy and left offset of carousel\n      if(item.hasClass('prev') || e.direction === 4) {\n        newPos = carouselPos + itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth - 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n      else if(item.hasClass('next')  || e.direction === 2) {\n        newPos = carouselPos - itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth + 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n\n      carousel.css({\n        left: newPos\n      });\n\n      // settimeout based on length of css transition -- stops button jammers\n      setTimeout(setCarouselAnimating, 300);\n\n    },\n    checkCarouselBtns: function(nav, activeElem, itemAmt) {\n      // logic to toggle visiblity of btns\n      if (activeElem > 0) {\n        nav.children('.prev').addClass('visible').removeClass('hidden');\n      }\n      else if (activeElem < 1) {\n        nav.children('.prev').addClass('hidden').removeClass('visible');\n      }\n\n      if (activeElem >= itemAmt - 1) {\n        nav.children('.next').addClass('hidden').removeClass('visible');\n      }\n      else if (activeElem <= itemAmt - 1) {\n        nav.children('.next').addClass('visible').removeClass('hidden');\n      }\n    },\n    highlightUpTo: function() {\n      $('.c-stats--container').each(function () {\n        const item = $(this).find('.c-stats--item');\n        const highlight = $(this).find('.c-stats--highlight');\n\n        if ($(window).innerWidth() > 760 && $(this).hasClass('with-hover')) {\n          $(item).on('mouseenter', function() {\n            const elem = $(this).children('.c-stat--illus');\n\n            if (elem.hasClass('c-illus__signed')) {\n              highlight.removeClass('highlight-second highlight-third');\n              highlight.addClass('highlight-first');\n            }\n            else if (elem.hasClass('c-illus__waiting')) {\n              highlight.removeClass('highlight-first highlight-third');\n              highlight.addClass('highlight-second');\n            }\n            else if (elem.hasClass('c-illus__vetoed')) {\n              highlight.removeClass('highlight-first highlight-second');\n              highlight.addClass('highlight-third');\n            }\n          });\n        }\n      });\n    },\n  };\n})(document, Drupal, jQuery);\n"],"file":"quick-facts.es6.js"}