{"version":3,"sources":["src/patterns/components/sticky-nav/sticky-nav.es6.js"],"names":["document","Drupal","$","behaviors","stickyNav","attach","self","nav","navItems","sections","pageNav","didScroll","collapsedHeaderHeight","openHeaderHeight","aboutPageNav","each","thisSection","id","thisHeight","outerHeight","topOffset","offset","top","bottomOffset","on","e","animateTo","window","scroll","setInterval","checkScroll","preventDefault","targetId","target","parent","attr","currLoc","scrollTop","targetLoc","animate","winTop","hasClass","boundaryTop","activeSection","setActiveNavItem","addClass","removeClass","active","undefined","find","children","css","substr","length","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Sticky Nav.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Sticky Nav behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.stickyNav = {\n    attach: function () {\n      const self = this;\n      const nav = $('#js-page-nav');\n      const navItems = $('#js-page-nav [class*=\\'js-nav-item\\']');\n      const sections = $('[id^=\\'section-\\']');\n      const pageNav = $('#js-sticky--clone .c-nav--wrap');\n      let didScroll = false;\n      let collapsedHeaderHeight = 140;\n      let openHeaderHeight = 200;\n\n      self.aboutPageNav(\n        nav,\n        navItems,\n        pageNav,\n        sections,\n        didScroll,\n        collapsedHeaderHeight,\n        openHeaderHeight,\n        self\n      );\n    },\n\n    aboutPageNav: function (\n      nav,\n      navItems,\n      pageNav,\n      sections,\n      didScroll,\n      collapsedHeaderHeight,\n      openHeaderHeight,\n      self\n    ) {\n      // Find the offset for each section\n      sections.each(function () {\n        var thisSection = $('#' + this.id);\n        var thisHeight = thisSection.outerHeight();\n\n        this.topOffset = thisSection.offset().top;\n        this.bottomOffset = this.topOffset + thisHeight;\n      });\n\n      // bind .scrollTo to nav links\n      navItems.on('click', function (e) {\n        self.animateTo(e, collapsedHeaderHeight, openHeaderHeight);\n      });\n\n      $(window).scroll(function () {\n        didScroll = true;\n      });\n\n      setInterval(function () {\n        if (didScroll) {\n          didScroll = false;\n          self.checkScroll(\n            collapsedHeaderHeight,\n            openHeaderHeight,\n            sections,\n            nav,\n            navItems,\n            pageNav,\n            self\n          );\n        }\n      }, 250);\n    },\n\n    animateTo: function (e, collapsedHeaderHeight, openHeaderHeight) {\n      e.preventDefault();\n\n      var targetId = $(e.target).parent('li').attr('data-section');\n\n      var offset;\n\n      var currLoc = $(window).scrollTop();\n      var targetLoc = $('#' + targetId).offset().top;\n\n      /*\n\t\t\t\tif the current location is below the target, the nav will open so the offset should be based on that. otherwise the offset is the closed header height.\n\t\t\t*/\n      if (currLoc > targetLoc) {\n        offset = openHeaderHeight - 2;\n      }\n      else {\n        offset = collapsedHeaderHeight - 2;\n      }\n\n      $('html, body').animate(\n        {\n          scrollTop: targetLoc - offset\n        },\n        750\n      );\n    },\n\n    checkScroll: function (\n      collapsedHeaderHeight,\n      openHeaderHeight,\n      sections,\n      nav,\n      navItems,\n      pageNav,\n      self\n    ) {\n      var winTop = $(window).scrollTop();\n\n      var offset;\n\n      if (!pageNav.hasClass('closed')) {\n        offset = openHeaderHeight;\n      }\n      else {\n        offset = collapsedHeaderHeight;\n      }\n\n      var boundaryTop = winTop + offset;\n      var activeSection;\n\n      // loop through sections. test to see if it's in the right place.\n      sections.each(function () {\n        if (this.topOffset <= boundaryTop && this.bottomOffset >= boundaryTop) {\n          activeSection = this.id;\n        }\n      });\n\n      self.setActiveNavItem(activeSection, navItems, nav);\n\n      // collapse or expand menu\n      if ($(window).scrollTop() > 100) {\n        nav.addClass('collapsed');\n      }\n      else {\n        nav.removeClass('collapsed');\n      }\n    },\n\n    setActiveNavItem: function (active, navItems, nav) {\n      // use the active section to set which link is active\n      // and offset ul to show that item\n      if (active !== undefined) {\n        navItems.removeClass('active');\n        nav.find('[data-section=\\'' + active + '\\']').addClass('active');\n\n        // move nav\n        nav\n          .children('ul')\n          .css('top', active.substr(active.length - 1) * -50 + 'px');\n      }\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"sticky-nav.es6.js"}