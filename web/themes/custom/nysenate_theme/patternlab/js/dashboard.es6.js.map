{"version":3,"sources":["src/patterns/pages/dashboard/dashboard.es6.js"],"names":["document","Drupal","$","behaviors","dashboard","attach","context","win","window","origNav","self","debounceTime","once","each","nav","clone","attr","headerBar","find","sidebarToggle","sidebar","sidebarToggleInit","prependTo","css","navTop","offset","top","alignPosition","scroll","debounce","checkTopBarState","resize","initToolbarObserver","doc","currentTop","scrollTop","outerHeight","hasClass","addClass","removeClass","orig","cloneTop","isMobile","width","winScrollTop","removeAttr","origTop","position","err","targetNode","config","attributes","childList","subtree","callback","mutationList","mutation","attributeName","target","localName","observer","MutationObserver","observe","disconnect","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Dashboard Header.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Dashboard Header behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.dashboard = {\n    attach: function (context) {\n      if (context !== document) {\n        return;\n      }\n\n      const win = $(window);\n      const origNav = $('#js-sticky--dashboard', context);\n      const self = this;\n      const debounceTime = 250;\n\n      origNav.once('navigation').each(function () {\n        const nav = origNav.clone().attr('id', 'js-sticky--dashboard--clone');\n\n        const headerBar = nav.find('.c-header-bar');\n\n        const sidebarToggle = nav.find('.sidebar-toggle');\n        sidebarToggle.each(Drupal.behaviors.sidebar.sidebarToggleInit);\n\n        // place clone\n        nav.prependTo('.page').css({\n          'z-index': '100'\n        });\n        const navTop = nav.offset().top;\n\n        self.alignPosition(origNav, nav, navTop);\n\n        win.scroll(\n          Drupal.debounce(() => self.checkTopBarState(nav, headerBar), 300)\n        );\n        win.scroll(\n          Drupal.debounce(\n            () => self.alignPosition(origNav, nav, navTop),\n            debounceTime\n          )\n        );\n        win.resize(\n          Drupal.debounce(\n            () => self.alignPosition(origNav, nav, navTop),\n            debounceTime\n          )\n        );\n\n        self.initToolbarObserver(origNav, nav, self.alignPosition);\n      });\n    },\n\n    checkTopBarState: function (nav, headerBar) {\n      let doc = $(document);\n      let currentTop = doc.scrollTop();\n\n      if (currentTop > nav.outerHeight() && !headerBar.hasClass('collapsed')) {\n        headerBar.addClass('collapsed');\n      }\n      else if (\n        currentTop <= nav.outerHeight() &&\n        headerBar.hasClass('collapsed')\n      ) {\n        headerBar.removeClass('collapsed');\n      }\n    },\n    alignPosition: function (orig, clone, cloneTop) {\n      try {\n        const win = $(window);\n        const isMobile = win.width() < 576;\n        const winScrollTop = win.scrollTop();\n\n        if (isMobile) {\n          clone.removeAttr('style');\n          orig.addClass('fixed');\n          if (winScrollTop > cloneTop) {\n            clone.addClass('fixed');\n            orig.removeClass('fixed');\n          }\n          else {\n            clone.removeClass('fixed');\n            orig.addClass('fixed');\n          }\n        }\n        else {\n          const origTop = orig.position().top;\n          clone.css('top', `${typeof origTop === 'number' ? origTop : 0}px`);\n          clone.addClass('fixed');\n          orig.removeClass('fixed');\n          orig.removeAttr('style');\n        }\n      }\n      catch (err) {\n        return err;\n      }\n    },\n    initToolbarObserver: function (origNav, nav, alignPosition) {\n      // Select the node that will be observed for mutations\n      const targetNode = $('body');\n\n      // Options for the observer (which mutations to observe)\n      const config = { attributes: true, childList: true, subtree: true };\n\n      // Callback function to execute when mutations are observed\n      const callback = (mutationList) => {\n        for (const mutation of mutationList) {\n          if (\n            mutation.attributeName === 'style' &&\n            mutation.target.localName === 'body'\n          ) {\n            alignPosition(origNav, nav);\n          }\n        }\n      };\n\n      // Create an observer instance linked to the callback function\n      const observer = new MutationObserver(callback);\n\n      try {\n        // Start observing the target node for configured mutations\n        targetNode.each(function () {\n          observer.observe(this, config);\n        });\n      }\n      catch (err) {\n        observer.disconnect();\n        return err;\n      }\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"dashboard.es6.js"}