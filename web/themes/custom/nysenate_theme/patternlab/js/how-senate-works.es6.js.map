{"version":3,"sources":["src/patterns/components/how-senate-works/how-senate-works.es6.js"],"names":["document","Drupal","$","behaviors","howSenateWorks","attach","context","self","carouselAnimating","carouselNavBtn","length","hammer","on","event","carouselAdvance","debounce","e","item","PREV_VALUE","NEXT_VALUE","nav","newPos","activeElem","direction","target","parents","siblings","parent","wrap","carousel","find","itemAmt","children","itemWidth","width","carouselPos","parseInt","css","hasClass","preventDefault","setCarouselAnimating","Math","abs","checkCarouselBtns","left","setTimeout","addClass","removeClass","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the How Senate Works.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the How Senate Works behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.howSenateWorks = {\n    attach: function (context) {\n      if (context !== document) {\n        return;\n      }\n      const self = this;\n      let carouselAnimating = false;\n      const carouselNavBtn = $(\n        '.c-carousel--how-senate-works.c-carousel--nav .c-carousel--btn',\n        context\n      );\n\n      if ($('#js-carousel-budget').length > 0) {\n        $('#js-carousel-budget')\n          .hammer()\n          .on('swipe', function (event) {\n            self.carouselAdvance(event, carouselAnimating, self, $(this));\n          });\n      }\n      if ($('#js-carousel-law').length > 0) {\n        $('#js-carousel-law')\n          .hammer()\n          .on('swipe', function (event) {\n            self.carouselAdvance(event, carouselAnimating, self, $(this));\n          });\n      }\n\n      carouselNavBtn.on(\n        'click',\n        Drupal.debounce(function (event) {\n          self.carouselAdvance(event, carouselAnimating, self, $(this));\n        }, 300)\n      );\n    },\n    carouselAdvance: function (e, carouselAnimating, self, item) {\n      const PREV_VALUE = 4;\n      const NEXT_VALUE = 2;\n\n      if (carouselAnimating) {\n        return;\n      }\n\n      let nav;\n      let newPos;\n      let activeElem;\n\n      // the nav is a different relationship if we're touch\n      if (e.direction === PREV_VALUE || e.direction === NEXT_VALUE) {\n        nav = $(e.target).parents('.js-carousel').siblings('.c-carousel--nav');\n      }\n      else {\n        nav = item.parent('.c-carousel--nav');\n      }\n\n      const wrap = nav.parent();\n      const carousel = wrap.find('.js-carousel');\n      const itemAmt = carousel.children().length;\n      const itemWidth = carousel.width() / itemAmt;\n      const carouselPos = parseInt(carousel.css('left'));\n\n      // if the previous button is hidden - do not move that way or at all\n      if (e.direction === PREV_VALUE && nav.children('.prev').hasClass('hidden')) {\n        return false;\n      }\n      // if the next button is hidden - do not move that way or at all\n      else if (e.direction === NEXT_VALUE && nav.children('.next').hasClass('hidden')) {\n        return false;\n      }\n      else {\n        e.preventDefault();\n      }\n\n      // set flag to stop button jammers\n      carouselAnimating = true;\n\n      const setCarouselAnimating = function () {\n        carouselAnimating = false;\n      };\n\n      // logic to set directionaltiy and left offset of carousel\n      if (item.hasClass('prev') || e.direction === PREV_VALUE) {\n        newPos = carouselPos + itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth - 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n      else if (item.hasClass('next') || e.direction === NEXT_VALUE) {\n        newPos = carouselPos - itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth + 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n\n      carousel.css({\n        left: newPos\n      });\n\n      // settimeout based on length of css transition -- stops button jammers\n      setTimeout(setCarouselAnimating, 300);\n    },\n    checkCarouselBtns: function (nav, activeElem, itemAmt) {\n      // logic to toggle visiblity of btns\n      if (activeElem > 0) {\n        nav.children('.prev').addClass('visible').removeClass('hidden');\n      }\n      else if (activeElem < 1) {\n        nav.children('.prev').addClass('hidden').removeClass('visible');\n      }\n\n      if (activeElem >= itemAmt - 1) {\n        nav.children('.next').addClass('hidden').removeClass('visible');\n      }\n      else if (activeElem <= itemAmt - 1) {\n        nav.children('.next').addClass('visible').removeClass('hidden');\n      }\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"how-senate-works.es6.js"}