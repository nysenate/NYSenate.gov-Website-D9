{"version":3,"sources":["src/patterns/components/nysenate-accordion/nysenate-accordion.es6.js"],"names":["document","Drupal","$","behaviors","accordion","attach","context","self","$accordions","$toggles","$headings","find","each","$accordion","$heading","$itemCount","length","console","log","appendTo","$toggle","on","toggleClickEvent","$content","attr","$contents","hasClass","removeClass","changeAllTexts","changeCurrentTexts","addClass","textsToReplace","html","closeAccordionTexts","replace","text","status","$headinIndicator","textToReplace","openAccordionText","closeAccordionText","jQuery"],"mappings":"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","sourcesContent":["/**\n * @file\n * Behaviors for the Filter Accordion.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  /**\n   * Setup and attach the Filter Accordion behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.accordion = {\n    attach: function(context) {\n\n      const self = this;\n      const $accordions = $('.nysenate-accordion', context);\n      const $toggles = $('.nysenate-accordion__toggle', context);\n      const $headings = $accordions.find('.nysenate-accordion__heading > span');\n\n      $accordions.each(function() {\n        const $accordion = $(this);\n        const $heading = $accordion.find('.nysenate-accordion__heading');\n        const $itemCount = $accordion.find('.nysenate-accordion__content', context).length;\n\n        console.log($itemCount, $heading);\n\n        $(`<span>(${$itemCount})</span>`).appendTo($heading);\n\n        // Attach click handler for accordion.\n        const $toggle = $accordion.find('.nysenate-accordion__toggle', context);\n        $toggle.on('click', function() {\n          self.toggleClickEvent(self, $accordions, $headings, $toggles, $accordion, $heading, $(this));\n        });\n      });\n    },\n    toggleClickEvent: function(self, $accordions, $headings, $toggles, $accordion, $heading, $toggle) {\n\n      // Identify the matching element.\n      const $content = $accordion.find('#' + $toggle.attr('aria-controls'));\n\n      // all matching elements\n      const $contents = $accordions.find('#' + $toggle.attr('aria-controls'));\n\n      if (!$accordion.hasClass('open')) {\n        $accordions.removeClass('open');\n        $toggles.attr('aria-expanded', 'false');\n        $contents.attr('aria-hidden', 'true');\n        self.changeAllTexts($headings);\n\n        self.changeCurrentTexts($heading, 'open');\n        // Accordion does not have `.open`, so we are opening the accordion.\n        $accordion.addClass('open');\n        // Toggle the `aria-expanded`.\n        $toggle.attr('aria-expanded', 'true');\n        // Toggle the `aria-hidden` attribute on the content.\n        $content.attr('aria-hidden', 'false');\n      }\n      else {\n        // Same as the if, but in reverse.\n        self.changeCurrentTexts($heading, 'close');\n        $accordion.removeClass('open');\n        $toggle.attr('aria-expanded', 'false');\n        $content.attr('aria-hidden', 'true');\n      }\n    },\n    changeAllTexts: function ($headings) {\n      const textsToReplace = $headings.html();\n      const closeAccordionTexts = textsToReplace.replace('Hide', 'View');\n\n      $headings.text(closeAccordionTexts);\n\n      return false;\n    },\n    changeCurrentTexts: function ($heading, status) {\n      const $headinIndicator = $heading.find('.indicator');\n      const textToReplace = $headinIndicator.html();\n      const openAccordionText = textToReplace.replace('View', 'Hide');\n      const closeAccordionText = textToReplace.replace('Hide', 'View');\n\n      if (status === 'open') {\n        $headinIndicator.text(openAccordionText);\n      }\n      else {\n        $headinIndicator.text(closeAccordionText);\n      }\n\n      return false;\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"nysenate-accordion.es6.js"}