{"version":3,"sources":["src/patterns/components/nysenate-header/nysenate-header.js"],"names":["document","Drupal","$","behaviors","nysenateHeader","attach","context","self","userScroll","currentTop","scrollTop","previousTop","nav","menu","find","headerBar","actionBar","mobileNavToggle","searchToggle","on","toggleMobileNav","toggleSearchBar","window","scroll","Math","abs","height","hasClass","removeClass","blur","heroHeight","outerHeight","width","isMovingDown","checkTopBarState","isMovingUp","addClass","checkMenuState","isOutOfBounds","isTooHigh","isTooLow","body","toggleClass","focus","closeSearch","jQuery"],"mappings":"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","sourcesContent":["!((document, Drupal, $) => {\n  'use strict';\n  Drupal.behaviors.nysenateHeader = {\n    attach: function (context) {\n      let self = this;\n      let userScroll = 0;\n      let currentTop = $(document).scrollTop();\n      let previousTop = 0;\n      const nav = $('#js-sticky', context);\n      const menu = nav.find('.c-nav--wrap', context);\n      const headerBar = nav.find('.c-header-bar', context);\n      const actionBar = $('.c-actionbar', context);\n      const mobileNavToggle = nav.find('.js-mobile-nav--btn');\n      const searchToggle = $('.js-search--toggle', context);\n\n      mobileNavToggle.on('click', function() {\n        self.toggleMobileNav(nav);\n      });\n\n      searchToggle.on('click', function() {\n        self.toggleSearchBar(menu);\n      });\n\n      $(window).scroll(function () {\n        // Close the nav after scrolling 1/3rd of page.\n        if (\n          Math.abs(userScroll - $(window).scrollTop()) >\n          $(window).height() / 3\n        ) {\n          if ($('.c-nav--wrap').hasClass('search-open')) {\n            $('.c-nav--wrap').removeClass('search-open');\n            $('.c-nav--wrap').find('.c-site-search--box').blur();\n          }\n        }\n\n        var heroHeight =\n          nav.outerHeight() -\n          menu.outerHeight() -\n          headerBar.outerHeight() -\n          nav.outerHeight();\n\n        if ($(window).width() < 760) {\n          if (\n            self.isMovingDown(currentTop, previousTop) &&\n            currentTop >= nav.outerHeight()\n          ) {\n            actionBar.removeClass('hidden');\n            self.checkTopBarState(currentTop, previousTop, headerBar, nav);\n          }\n          else if (\n            self.isMovingUp(currentTop, previousTop) &&\n            currentTop < nav.outerHeight()\n          ) {\n            actionBar.addClass('hidden');\n            headerBar.removeClass('collapsed');\n          }\n        }\n        else {\n          self.checkTopBarState(currentTop, previousTop, headerBar, nav);\n\n          if (\n            self.isMovingUp(currentTop, previousTop) &&\n            currentTop <= nav.outerHeight() - 100 - 100\n          ) {\n            menu.addClass('closed');\n            headerBar.addClass('collapsed');\n\n            if (\n              self.isMovingUp(currentTop, previousTop) &&\n              currentTop <= nav.outerHeight() - 100 - 100 - 40 - 100\n            ) {\n              actionBar.addClass('hidden');\n            }\n          }\n          else if (currentTop >= heroHeight) {\n            actionBar.removeClass('hidden');\n            self.checkMenuState(menu);\n          }\n        }\n\n        previousTop = $(document).scrollTop();\n      });\n    },\n    checkMenuState: function (menu) {\n      if (this.isOutOfBounds()) {\n        return;\n      }\n\n      if (this.isMovingDown()) {\n        menu.addClass('closed');\n      }\n      else if (this.isMovingUp()) {\n        menu.removeClass('closed');\n      }\n    },\n    isMovingUp: function (currentTop, previousTop) {\n      return currentTop < previousTop;\n    },\n    isMovingDown: function (currentTop, previousTop) {\n      return currentTop > previousTop;\n    },\n    checkTopBarState: function (currentTop, previousTop, headerBar, nav) {\n      if (this.isOutOfBounds(currentTop, previousTop)) {\n        return;\n      }\n\n      if (currentTop > nav.outerHeight() && !headerBar.hasClass('collapsed')) {\n        headerBar.addClass('collapsed');\n      }\n      else if (\n        currentTop <= nav.outerHeight() &&\n        headerBar.hasClass('collapsed')\n      ) {\n        headerBar.removeClass('collapsed');\n      }\n    },\n    isOutOfBounds: function (currentTop, previousTop) {\n      return (\n        this.isTooHigh(currentTop, previousTop) || this.isTooLow(currentTop)\n      );\n    },\n    isTooHigh: function (currentTop, previousTop) {\n      return currentTop < 0 || previousTop < 0;\n    },\n    isTooLow: function (currentTop) {\n      return currentTop + $(window).height() >= $(document).height();\n    },\n    toggleMobileNav: function () {\n      var body = $('body');\n\n      // toggle classes\n      body.toggleClass('nav-open');\n    },\n    toggleSearchBar: function(menu) {\n      if(menu.hasClass('search-open')) {\n        menu.removeClass('search-open');\n        menu.find('.c-site-search--box').blur();\n      }\n      else {\n        menu.addClass('search-open');\n        menu.find('.c-site-search--box').focus();\n      }\n    },\n    closeSearch: function() {\n\n      if($('.c-nav--wrap').hasClass('search-open')) {\n        $('.c-nav--wrap').removeClass('search-open');\n        $('.c-nav--wrap').find('.c-site-search--box').blur();\n      }\n    },\n  };\n})(document, Drupal, jQuery);\n"],"file":"nysenate-header.js"}