{"version":3,"sources":["src/patterns/components/nysenate-tabs/nysenate-tabs.js"],"names":["document","Drupal","$","behaviors","nysenateTabs","attach","tabContainer","tabLink","textExpander","loadMore","each","tabArrowDown","find","tabInput","length","append","attr","parent","addClass","on","tabInputContainer","tabContent","removeAttr","removeClass","val","toggleTabDropdown","click","link","expander","closest","prev","lineCount","data","anchor","slideToggle","is","animate","scrollTop","offset","top","html","animationDelay","animationDuration","pagerContainer","items","limit","parseInt","css","slice","show","itemsHidden","e","preventDefault","delay","slideDown","tab","tabBar","parents","billVersion","split","newUrl","history","pushState","hasClass","jQuery"],"mappings":"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","sourcesContent":["!((document, Drupal, $) => {\n  'use strict';\n  Drupal.behaviors.nysenateTabs = {\n    attach: function () {\n      const tabContainer = $('.l-tab-bar');\n      const tabLink = $('.c-tab .c-tab-link');\n      const textExpander = $('.text-expander');\n      const loadMore = $('.load-more');\n\n      tabContainer.each(function () {\n        const tabArrowDown = $(this).find('.c-tab--arrow');\n        const tabInput = $(this).find('input.form-radio');\n\n        if (tabArrowDown.length < 1) {\n          $(this).append('<div class=\"c-tab--arrow u-mobile-only\"></div>');\n        }\n\n        tabInput.each(function () {\n          // Use .attr('checked') instead of .is(:checked), because\n          // tabInput.on('click') logic below operates on checked attribute.\n          if ($(this).attr('checked')) {\n            $(this).parent().addClass('active');\n          }\n        });\n\n        tabInput.on('click', function () {\n          const tabInputContainer = tabInput.parent();\n          const tabContent = tabInputContainer\n            .parent()\n            .parent()\n            .find('.tabs-content');\n\n          tabInput.removeAttr('checked');\n          tabInputContainer.removeClass('active');\n\n          $(this).attr('checked', 'checked');\n          $(this).parent().addClass('active');\n\n          tabContent.find('.active').removeClass('active');\n          tabContent.find($(this).val()).addClass('active');\n        });\n      });\n\n      tabLink.on('click', this.toggleTabDropdown);\n\n      // event for text expander\n      if (textExpander) {\n        textExpander.click(function () {\n          const link = $(this);\n          const expander = link.closest('.item-list').prev();\n          const lineCount = expander.data('linecount');\n          const anchor = expander.prev();\n\n          expander.slideToggle(0);\n\n          if (expander.is(':hidden')) {\n            $('html,body').animate({ scrollTop: anchor.offset().top - 180 });\n            link.html('View More (' + lineCount + ' Lines)');\n            link.removeClass('expanded');\n          }\n          else {\n            $('html,body').animate({ scrollTop: expander.offset().top - 180 });\n            link.html('View Less');\n            link.addClass('expanded');\n          }\n        });\n      }\n\n      // event for load more\n      if (loadMore) {\n        const animationDelay = 200;\n        const animationDuration = 400;\n        loadMore.each(function () {\n          const pagerContainer = $(this).closest('.item-list');\n          const items = pagerContainer.parent().find('.content__item');\n\n          const limit = parseInt(pagerContainer.data('limit')) || 5;\n\n          items.css('display', 'none');\n\n          items.slice(0, limit).show();\n\n          let itemsHidden = $(this)\n            .closest('.item-list')\n            .parent()\n            .find('.content__item:hidden');\n\n          $(this).on('click', function (e) {\n            e.preventDefault();\n\n            itemsHidden\n              .slice(0, limit)\n              .delay(animationDelay)\n              .slideDown(animationDuration, () => {\n                itemsHidden = $(this)\n                  .closest('.item-list')\n                  .parent()\n                  .find('.content__item:hidden');\n\n                if (itemsHidden.length === 0) {\n                  $(this).css('display', 'none');\n                }\n              });\n          });\n        });\n      }\n    },\n    toggleTabDropdown: function (e) {\n      e.preventDefault();\n\n      const tab = $(this).parent('.c-tab');\n      const tabBar = $(this).parents('.l-tab-bar');\n      const billVersion = tab.data('version')\n        ? tab.data('version').split('-')\n        : null;\n      const newUrl = tab.data('target');\n\n      if (billVersion && newUrl) {\n        const tabContent = tab\n          .closest('.c-bill--amendment-details')\n          .parent()\n          .find('.tabs-content');\n\n        history.pushState({}, 'NY State Senate Bill ' + billVersion[1], newUrl);\n\n        tabContent.find('.active').removeClass('active');\n        tabContent.find($(this).val()).addClass('active');\n      }\n\n      if (tab.hasClass('active') && !tabBar.hasClass('open')) {\n        tabBar.addClass('open');\n      }\n      else {\n        tabBar.removeClass('open');\n      }\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"nysenate-tabs.js"}