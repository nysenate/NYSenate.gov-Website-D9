{"version":3,"sources":["src/patterns/components/quick-facts/quick-facts.es6.js"],"names":["document","Drupal","$","carouselAnimating","behaviors","quickFacts","attach","context","self","carouselNavBtn","theViewportWidth","window","width","highlightUpTo","hammer","on","event","carouselAdvance","debounce","click","preventDefault","tabNumber","data","pageBody","issuesUpdatesHeader","offset","undefined","headingCurrentPosition","top","animate","scrollTop","e","item","nav","newPos","activeElem","direction","target","parents","siblings","attr","parent","wrap","carousel","find","itemAmt","children","length","itemWidth","carouselPos","parseInt","css","hasClass","setCarouselAnimating","Math","abs","checkCarouselBtns","left","setTimeout","addClass","removeClass","each","highlight","innerWidth","elem","jQuery"],"mappings":"AAAA;;;;;AAIA;AAEA,CAAE,UAACA,QAAD,EAAWC,MAAX,EAAmBC,CAAnB,EAAyB;AACzB;;AAEA,MAAIC,iBAAiB,GAAG,KAAxB;AAEA;;;;;;AAKAF,EAAAA,MAAM,CAACG,SAAP,CAAiBC,UAAjB,GAA8B;AAC5BC,IAAAA,MAAM,EAAE,gBAAUC,OAAV,EAAmB;AACzB,UAAIA,OAAO,KAAKP,QAAhB,EAA0B;AACxB;AACD;;AACD,UAAMQ,IAAI,GAAG,IAAb;AACA,UAAMC,cAAc,GAAGP,CAAC,CACtB,2DADsB,EAEtBK,OAFsB,CAAxB;AAIA,UAAMG,gBAAgB,GAAGR,CAAC,CAACS,MAAD,CAAD,CAAUC,KAAV,EAAzB;AAEAJ,MAAAA,IAAI,CAACK,aAAL;AAEAX,MAAAA,CAAC,CAAC,0BAAD,CAAD,CACGY,MADH,GAEGC,EAFH,CAEM,OAFN,EAEe,UAAUC,KAAV,EAAiB;AAC5BR,QAAAA,IAAI,CAACS,eAAL,CAAqBD,KAArB,EAA4BR,IAA5B,EAAkCN,CAAC,CAAC,IAAD,CAAnC;AACD,OAJH;AAMAO,MAAAA,cAAc,CAACM,EAAf,CACE,OADF,EAEEd,MAAM,CAACiB,QAAP,CAAgB,UAAUF,KAAV,EAAiB;AAC/BR,QAAAA,IAAI,CAACS,eAAL,CAAqBD,KAArB,EAA4BR,IAA5B,EAAkCN,CAAC,CAAC,IAAD,CAAnC;AACD,OAFD,EAEG,GAFH,CAFF;AAOAA,MAAAA,CAAC,CAAC,+BAAD,CAAD,CAAmCiB,KAAnC,CAAyC,UAAUH,KAAV,EAAiB;AACxDA,QAAAA,KAAK,CAACI,cAAN;AAEA,YAAMC,SAAS,mBAAYnB,CAAC,CAAC,IAAD,CAAD,CAAQoB,IAAR,CAAa,KAAb,CAAZ,CAAf;AACA,YAAMC,QAAQ,GAAGrB,CAAC,CAAC,YAAD,CAAlB;AAEAA,QAAAA,CAAC,yBAAiBmB,SAAjB,SAAD,CAAiCF,KAAjC;AAEA,YAAMK,mBAAmB,GAAGtB,CAAC,CAAC,sBAAD,CAAD,CAA0BuB,MAA1B,EAA5B;;AACA,YAAID,mBAAmB,KAAKE,SAA5B,EAAuC;AACrC,cAAMC,sBAAsB,GAAGH,mBAAmB,CAACI,GAAnD;;AACA,cAAIlB,gBAAgB,GAAG,GAAvB,EAA4B;AAC1Ba,YAAAA,QAAQ,CAACM,OAAT,CACE;AAAEC,cAAAA,SAAS,EAAEH,sBAAsB,GAAG;AAAtC,aADF,EAEE,MAFF,EAGE,OAHF;AAKD,WAND,MAOK;AACHzB,YAAAA,CAAC,CAACmB,SAAD,CAAD,CAAaF,KAAb;AACAI,YAAAA,QAAQ,CAACM,OAAT,CACE;AAAEC,cAAAA,SAAS,EAAEH,sBAAsB,GAAG;AAAtC,aADF,EAEE,MAFF,EAGE,OAHF;AAKD;AACF;AACF,OA3BD;AA4BD,KAvD2B;AAwD5BV,IAAAA,eAAe,EAAE,yBAAUc,CAAV,EAAavB,IAAb,EAAmBwB,IAAnB,EAAyB;AACxC,UAAI7B,iBAAJ,EAAuB;AACrB;AACD;;AAED,UAAI8B,GAAJ;AACA,UAAIC,MAAJ;AACA,UAAIC,UAAJ,CAPwC,CASxC;;AACA,UAAIJ,CAAC,CAACK,SAAF,KAAgB,CAAhB,IAAqBL,CAAC,CAACK,SAAF,KAAgB,CAAzC,EAA4C;AAC1CH,QAAAA,GAAG,GAAG/B,CAAC,CAAC6B,CAAC,CAACM,MAAH,CAAD,CAAYC,OAAZ,CAAoB,cAApB,EAAoCC,QAApC,CAA6C,kBAA7C,CAAN,CAD0C,CAE1C;;AACA,YAAIN,GAAG,CAACO,IAAJ,CAAS,OAAT,MAAsBd,SAA1B,EAAqC;AACnCO,UAAAA,GAAG,GAAG/B,CAAC,CAAC6B,CAAC,CAACM,MAAH,CAAD,CACHC,OADG,CACK,wBADL,EAEHC,QAFG,CAEM,kBAFN,CAAN;AAGD;AACF,OARD,MASK;AACHN,QAAAA,GAAG,GAAGD,IAAI,CAACS,MAAL,CAAY,kBAAZ,CAAN;AACD;;AAED,UAAMC,IAAI,GAAGT,GAAG,CAACQ,MAAJ,EAAb;AACA,UAAME,QAAQ,GAAGD,IAAI,CAACE,IAAL,CAAU,cAAV,CAAjB;AACA,UAAMC,OAAO,GAAGF,QAAQ,CAACG,QAAT,GAAoBC,MAApC;AACA,UAAMC,SAAS,GAAGL,QAAQ,CAAC/B,KAAT,KAAmBiC,OAArC;AACA,UAAII,WAAW,GAAG,CAAlB;AACAA,MAAAA,WAAW,GAAGC,QAAQ,CAACP,QAAQ,CAACQ,GAAT,CAAa,MAAb,CAAD,CAAtB,CA5BwC,CA8BxC;;AACA,UAAIpB,CAAC,CAACK,SAAF,KAAgB,CAAhB,IAAqBH,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBM,QAAtB,CAA+B,QAA/B,CAAzB,EAAmE;AACjE,eAAO,KAAP;AACD,OAFD,CAGA;AAHA,WAIK,IAAIrB,CAAC,CAACK,SAAF,KAAgB,CAAhB,IAAqBH,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBM,QAAtB,CAA+B,QAA/B,CAAzB,EAAmE;AACtE,iBAAO,KAAP;AACD,SAFI,MAGA;AACHrB,UAAAA,CAAC,CAACX,cAAF;AACD,SAxCuC,CA0CxC;;;AACAjB,MAAAA,iBAAiB,GAAG,IAApB;;AAEA,UAAMkD,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAY;AACvClD,QAAAA,iBAAiB,GAAG,KAApB;AACD,OAFD,CA7CwC,CAiDxC;;;AACA,UAAI6B,IAAI,CAACoB,QAAL,CAAc,MAAd,KAAyBrB,CAAC,CAACK,SAAF,KAAgB,CAA7C,EAAgD;AAC9CF,QAAAA,MAAM,GAAGe,WAAW,GAAGD,SAAvB;AACAb,QAAAA,UAAU,GAAGmB,IAAI,CAACC,GAAL,CAASN,WAAT,IAAwBD,SAAxB,GAAoC,CAAjD;AAEAxC,QAAAA,IAAI,CAACgD,iBAAL,CAAuBvB,GAAvB,EAA4BE,UAA5B,EAAwCU,OAAxC;AACD,OALD,MAMK,IAAIb,IAAI,CAACoB,QAAL,CAAc,MAAd,KAAyBrB,CAAC,CAACK,SAAF,KAAgB,CAA7C,EAAgD;AACnDF,QAAAA,MAAM,GAAGe,WAAW,GAAGD,SAAvB;AACAb,QAAAA,UAAU,GAAGmB,IAAI,CAACC,GAAL,CAASN,WAAT,IAAwBD,SAAxB,GAAoC,CAAjD;AAEAxC,QAAAA,IAAI,CAACgD,iBAAL,CAAuBvB,GAAvB,EAA4BE,UAA5B,EAAwCU,OAAxC;AACD;;AAEDF,MAAAA,QAAQ,CAACQ,GAAT,CAAa;AACXM,QAAAA,IAAI,EAAEvB;AADK,OAAb,EA/DwC,CAmExC;;AACAwB,MAAAA,UAAU,CAACL,oBAAD,EAAuB,GAAvB,CAAV;AACD,KA7H2B;AA8H5BG,IAAAA,iBAAiB,EAAE,2BAAUvB,GAAV,EAAeE,UAAf,EAA2BU,OAA3B,EAAoC;AACrD;AACA,UAAIV,UAAU,GAAG,CAAjB,EAAoB;AAClBF,QAAAA,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBa,QAAtB,CAA+B,SAA/B,EAA0CC,WAA1C,CAAsD,QAAtD;AACD,OAFD,MAGK,IAAIzB,UAAU,GAAG,CAAjB,EAAoB;AACvBF,QAAAA,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBa,QAAtB,CAA+B,QAA/B,EAAyCC,WAAzC,CAAqD,SAArD;AACD;;AAED,UAAIzB,UAAU,IAAIU,OAAO,GAAG,CAA5B,EAA+B;AAC7BZ,QAAAA,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBa,QAAtB,CAA+B,QAA/B,EAAyCC,WAAzC,CAAqD,SAArD;AACD,OAFD,MAGK,IAAIzB,UAAU,IAAIU,OAAO,GAAG,CAA5B,EAA+B;AAClCZ,QAAAA,GAAG,CAACa,QAAJ,CAAa,OAAb,EAAsBa,QAAtB,CAA+B,SAA/B,EAA0CC,WAA1C,CAAsD,QAAtD;AACD;AACF,KA7I2B;AA8I5B/C,IAAAA,aAAa,EAAE,yBAAY;AACzBX,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyB2D,IAAzB,CAA8B,YAAY;AACxC,YAAM7B,IAAI,GAAG9B,CAAC,CAAC,IAAD,CAAD,CAAQ0C,IAAR,CAAa,gBAAb,CAAb;AACA,YAAMkB,SAAS,GAAG5D,CAAC,CAAC,IAAD,CAAD,CAAQ0C,IAAR,CAAa,qBAAb,CAAlB;;AAEA,YAAI1C,CAAC,CAACS,MAAD,CAAD,CAAUoD,UAAV,KAAyB,GAAzB,IAAgC7D,CAAC,CAAC,IAAD,CAAD,CAAQkD,QAAR,CAAiB,YAAjB,CAApC,EAAoE;AAClElD,UAAAA,CAAC,CAAC8B,IAAD,CAAD,CAAQjB,EAAR,CAAW,YAAX,EAAyB,YAAY;AACnC,gBAAMiD,IAAI,GAAG9D,CAAC,CAAC,IAAD,CAAD,CAAQ4C,QAAR,CAAiB,gBAAjB,CAAb;;AAEA,gBAAIkB,IAAI,CAACZ,QAAL,CAAc,iBAAd,CAAJ,EAAsC;AACpCU,cAAAA,SAAS,CAACF,WAAV,CAAsB,kCAAtB;AACAE,cAAAA,SAAS,CAACH,QAAV,CAAmB,iBAAnB;AACD,aAHD,MAIK,IAAIK,IAAI,CAACZ,QAAL,CAAc,kBAAd,CAAJ,EAAuC;AAC1CU,cAAAA,SAAS,CAACF,WAAV,CAAsB,iCAAtB;AACAE,cAAAA,SAAS,CAACH,QAAV,CAAmB,kBAAnB;AACD,aAHI,MAIA,IAAIK,IAAI,CAACZ,QAAL,CAAc,iBAAd,CAAJ,EAAsC;AACzCU,cAAAA,SAAS,CAACF,WAAV,CAAsB,kCAAtB;AACAE,cAAAA,SAAS,CAACH,QAAV,CAAmB,iBAAnB;AACD;AACF,WAfD;AAgBD;AACF,OAtBD;AAuBD;AAtK2B,GAA9B;AAwKD,CAlLA,CAkLE3D,QAlLF,EAkLYC,MAlLZ,EAkLoBgE,MAlLpB,CAAD","sourcesContent":["/**\n * @file\n * Behaviors for the Quick Facts.\n */\n/* eslint-disable max-len */\n\n!((document, Drupal, $) => {\n  'use strict';\n\n  let carouselAnimating = false;\n\n  /**\n   * Setup and attach the Quick Facts behaviors.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.quickFacts = {\n    attach: function (context) {\n      if (context !== document) {\n        return;\n      }\n      const self = this;\n      const carouselNavBtn = $(\n        '.c-carousel--quick-facts.c-carousel--nav .c-carousel--btn',\n        context\n      );\n      const theViewportWidth = $(window).width();\n\n      self.highlightUpTo();\n\n      $('#js-carousel-about-stats')\n        .hammer()\n        .on('swipe', function (event) {\n          self.carouselAdvance(event, self, $(this));\n        });\n\n      carouselNavBtn.on(\n        'click',\n        Drupal.debounce(function (event) {\n          self.carouselAdvance(event, self, $(this));\n        }, 300)\n      );\n\n      $('.c-senate-quick-facts__button').click(function (event) {\n        event.preventDefault();\n\n        const tabNumber = `#panel${$(this).data('tab')}`;\n        const pageBody = $('html, body');\n\n        $(`input[value=\"${tabNumber}\"]`).click();\n\n        const issuesUpdatesHeader = $('#issuesUpdatesHeader').offset();\n        if (issuesUpdatesHeader !== undefined) {\n          const headingCurrentPosition = issuesUpdatesHeader.top;\n          if (theViewportWidth > 769) {\n            pageBody.animate(\n              { scrollTop: headingCurrentPosition - 220 },\n              '1000',\n              'swing'\n            );\n          }\n          else {\n            $(tabNumber).click();\n            pageBody.animate(\n              { scrollTop: headingCurrentPosition - 110 },\n              '1000',\n              'swing'\n            );\n          }\n        }\n      });\n    },\n    carouselAdvance: function (e, self, item) {\n      if (carouselAnimating) {\n        return;\n      }\n\n      let nav;\n      let newPos;\n      let activeElem;\n\n      // the nav is a different relationship if we're touch\n      if (e.direction === 4 || e.direction === 2) {\n        nav = $(e.target).parents('.js-carousel').siblings('.c-carousel--nav');\n        // this happens on the tour carousel has different DOM\n        if (nav.attr('class') === undefined) {\n          nav = $(e.target)\n            .parents('.c-tour--carousel-wrap')\n            .siblings('.c-carousel--nav');\n        }\n      }\n      else {\n        nav = item.parent('.c-carousel--nav');\n      }\n\n      const wrap = nav.parent();\n      const carousel = wrap.find('.js-carousel');\n      const itemAmt = carousel.children().length;\n      const itemWidth = carousel.width() / itemAmt;\n      let carouselPos = 0;\n      carouselPos = parseInt(carousel.css('left'));\n\n      // if the previous button is hidden - do not move that way or at all\n      if (e.direction === 4 && nav.children('.prev').hasClass('hidden')) {\n        return false;\n      }\n      // if the next button is hidden - do not move that way or at all\n      else if (e.direction === 2 && nav.children('.next').hasClass('hidden')) {\n        return false;\n      }\n      else {\n        e.preventDefault();\n      }\n\n      // set flag to stop button jammers\n      carouselAnimating = true;\n\n      const setCarouselAnimating = function () {\n        carouselAnimating = false;\n      };\n\n      // logic to set directionaltiy and left offset of carousel\n      if (item.hasClass('prev') || e.direction === 4) {\n        newPos = carouselPos + itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth - 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n      else if (item.hasClass('next') || e.direction === 2) {\n        newPos = carouselPos - itemWidth;\n        activeElem = Math.abs(carouselPos) / itemWidth + 1;\n\n        self.checkCarouselBtns(nav, activeElem, itemAmt);\n      }\n\n      carousel.css({\n        left: newPos\n      });\n\n      // settimeout based on length of css transition -- stops button jammers\n      setTimeout(setCarouselAnimating, 300);\n    },\n    checkCarouselBtns: function (nav, activeElem, itemAmt) {\n      // logic to toggle visiblity of btns\n      if (activeElem > 0) {\n        nav.children('.prev').addClass('visible').removeClass('hidden');\n      }\n      else if (activeElem < 1) {\n        nav.children('.prev').addClass('hidden').removeClass('visible');\n      }\n\n      if (activeElem >= itemAmt - 1) {\n        nav.children('.next').addClass('hidden').removeClass('visible');\n      }\n      else if (activeElem <= itemAmt - 1) {\n        nav.children('.next').addClass('visible').removeClass('hidden');\n      }\n    },\n    highlightUpTo: function () {\n      $('.c-stats--container').each(function () {\n        const item = $(this).find('.c-stats--item');\n        const highlight = $(this).find('.c-stats--highlight');\n\n        if ($(window).innerWidth() > 760 && $(this).hasClass('with-hover')) {\n          $(item).on('mouseenter', function () {\n            const elem = $(this).children('.c-stat--illus');\n\n            if (elem.hasClass('c-illus__signed')) {\n              highlight.removeClass('highlight-second highlight-third');\n              highlight.addClass('highlight-first');\n            }\n            else if (elem.hasClass('c-illus__waiting')) {\n              highlight.removeClass('highlight-first highlight-third');\n              highlight.addClass('highlight-second');\n            }\n            else if (elem.hasClass('c-illus__vetoed')) {\n              highlight.removeClass('highlight-first highlight-second');\n              highlight.addClass('highlight-third');\n            }\n          });\n        }\n      });\n    }\n  };\n})(document, Drupal, jQuery);\n"],"file":"quick-facts.es6.js"}