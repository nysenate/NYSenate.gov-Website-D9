{{ attach_library('nysenate_theme/session') }}

{% if video_status.key == 'streaming_live_now' and content.field_video_redirect.0 %}
  <div class="c-meeting-detail--descript">
    {{ content.field_ustream }}
  </div>
{% elseif video_status.key == 'streaming_redirect' and content.field_video_redirect.0 %}
  {{ content.field_ustream }}
{% endif %}

<article class="c-block c-meeting-detail--header">
  <div class="c-meeting-detail--meta">
    {% if event_status.key == 'live_now' %}
      <p class="c-meeting-detail--live-flag">
        {{ event_status.value }}
      </p>
    {% endif %}

    {% if field_off_the_floor.key == '1' %}
      <p class="c-meeting-detail--live-flag">
        {{ field_off_the_floor.value }}
      </p>
    {% endif %}
  </div>

  <div>
    <p class="c-meeting-detail--date">
      {% if date_value %}
        <span class="c-meeting-date--num">{{ date_value.day }}</span>
        <span class="c-meeting-date--month">{{ date_value.month }}</span>
        <span class="c-meeting-date--year">{{ date_value.year }}</span>
      {% endif %}
    </p>
  </div>

  <div class="c-meeting-detail--info">
    <h1 class="c-meeting-detail--title">
      {{ title }}
    </h1>
    <a class="c-meeting-detail--location-link" href="http://maps.google.com/?q={{ location_url }}" title="{{ content.field_location[0].organization['#value'] }}" target="_blank">
      {{ content.field_location[0].organization['#value'] }}
    </a>
    <div class="c-meeting-detail--location">
      {% if content.field_meeting_location.0 %}
        {{ content.field_meeting_location.0 }}
      {% endif %}
      {% if location %}
        {{ location }}
      {% endif %}
    </div>
    <p class="c-meeting-detail--time">
      {{ date_value.from_time }}
      {% if date_value.from_time != date_value.to_time %}
        to
        {{ date_value.to_time }}
      {% endif %}
      {% if video_status.key != 'streaming_redirect' %}
        <span class="c-meeting-video--status icon-before__youtube">
          {{ video_status.value }}
        </span>
      {% endif %}
    </p>

    {% if calendar_links %}
      {% include '@nysenate_theme/add-to-calendar/add-to-calendar.twig' with {
        calendar_links: calendar_links
      } only %}
    {% endif %}
  </div>

  <div class="c-meeting-detail--descript">
    {{ content.body }}
  </div>

  {% if content.field_chapters %}
    <div class="c-meeting-detail--descript">
      {{ content.field_chapters }}
    </div>
  {% endif %}

  {% if content.field_issues[0] %}
    <div class="c-meeting-detail--related">
      <ul class="c-meeting-detail--related">
        <p>related issues:</p>
        {% for key,issue in content.field_issues if key matches '/^\\d+$/' %}
          <li>{{ issue }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if content.field_yt[0] %}
    <div class="c-meeting-detail--descript">
      {% include '@nysenate_theme/video-embed/video-embed.twig' with {
        video: content.field_yt
      } only %}
    </div>
  {% endif %}
</article>

{% include '@nysenate_theme/nysenate-social-buttons/nysenate-social-buttons.twig' with {
  title: node.type.entity.label,
  node_url: url,
  cta: cta,
} only
%}
